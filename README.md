# 얀데레 아가씨 렌파이 소스코드

# 배경

이 저장소에는 2015년 하반기에 제가 출시했던 얀데레 아가씨 라는 모바일 게임의 렌파이 버전 소스코드가 수정없이 완전히 저장되어 있습니다. 저는 광고를 쉽게 이식하기 위해 이 게임은 3개월 뒤 유니티 C# 으로 포팅하였습니다.

렌파이는 텍스트 어드벤처 장르를, 많은 다른 스크립트 언어 기반 엔진들 보다 명확한 구조로 작성할 수 있는 멋진 도구입니다. 하지만 한국에서 예제 코드가 너무 적은 것이 문제입니다.

당시에 가볍게 시작한 프로젝트 였기에 소스코드 대부분의 구조를 작성하는데는 일주일 이상 소비하지 않았습니다. 여러 게임을 출시헤본 프로그래머가 된 현재에, 코드들을 다시 봤을때 부끄러운 변수명과 패턴이 많습니다. 수위 높은 유머를 넣은 변수명도 있습니다.

하지만 한국 커뮤니티에는 렌파이 label의 콜백 구조를 제어하여 루프물을 만드는 적절한 예제는 물론, 공부하기 위해 전체 프로젝트를 공유한 곳 자체가 없습니다. 이에 공부하기 좋은 예제를 남기기 위해 공개합니다.


# 코드

첨부된 코드의 99%는 렌파이로 작성된 마지막 버전의 얀데레 아가씨 프로젝트와 일치합니다. 제가 마지막 업데이트에서 빌드 직전에 중요하지 않은 트윅을 했던 기억이 있습니다만, 수정사항을 잃어버렸습니다.

# 애셋

사용되었던 이미지와 오디오의 대부분은 저작권 문제상 전혀 포함되어 있지 않습니다.

누락된 이미지와 오디오 명은 전체 리스트는 차후 텍스트로 공개하거나, 저작권상 공개 가능한 다른 파일들로 대체하여 저장소를 업데이트 할 예정입니다.

# 빌드

이 프로젝트를 빌드하기 위해서는 RenPy 프로그램이 필요합니다.
해당 프로그램은 아래 링크에서 받을 수 있습니다.

http://www.renpy.org

이미지와 오디오 애셋이 누락되어 있어 프로젝트를 그대로 빌드할 수는 없습니다. 렌파이 프로그램의 스크립트 확인 (오류검사) - 영어명 Check Script (Lint) - 기능을 사용하여 누락된 파일을 개략적으로 확인할 수 있습니다. 누락된 파일과 같은 이름의 파일을 해당 경로에 추가해야 합니다.


# 코드 부가 설명

초반에 이미지 선언이 매우 많습니다.

이는 이미지를 눈, 눈썹, 몸체 등으로 조각낸 다음 실시간으로 조립하여 코드로 동적으로 표정을 생성하여 사용하는 표정의 경우의 수를 늘렸기 떄문입니다.

대부분 대사를 쓰면서 필요에 따라 표정을 즉석 조합하고 표정의 변수명을 선언했기 때문에 변수명이 매우 끔찍합니다.



게임의 플로우

1. 게임 시작-> interaction 라벨로 이동. interaction 라벨은 입력 대기를 받는 라벨.

2. [대화하기 버튼을 누르면]-> conversation 라벨로 이동. 동시에

3. conversation 라벨에 도착하자 하면, 호감도를 기준으로 이동할 대화문 라벨을 결정. ex) 호감도가 200이상 350미만인 경우 c350_01 ~ c350_19 라벨 중 하나로 무작위로 이동.

4. 이동 직전 호감도를 증가시키고 대화문 라벨(c050_01 과 같은 라벨들)로 이동.

5. 대화가 진행된 후 대화문 라벨에서 interation으로 다시 되돌아감. 이후 반복.


# Credit
렌파이와 함께 좋은 하루되세요!
-- I_Jemin (i_jemin@hotmail.com)
